<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yinqiao.af.mapper.UserMapper">
  <resultMap id="BaseResultMap" type="com.yinqiao.af.model.User">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jan 24 15:20:54 CST 2018.
    -->
    <id column="TELNUM" jdbcType="VARCHAR" property="telnum" />
    <result column="OPENID" jdbcType="VARCHAR" property="openid" />
    <result column="PASSWORD" jdbcType="VARCHAR" property="password" />
    <result column="USERNAME" jdbcType="VARCHAR" property="username" />
    <result column="IDCARD" jdbcType="VARCHAR" property="idcard" />
    <result column="EFFSTART" jdbcType="TIMESTAMP" property="effstart" />
    <result column="EFFEND" jdbcType="TIMESTAMP" property="effend" />
    <result column="USERSTATUS" jdbcType="VARCHAR" property="userstatus" />
    <result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
    <result column="USERTYPE" jdbcType="VARCHAR" property="usertype"/>
    <result column="EXAM_TYPE" jdbcType="VARCHAR" property="examType"/>
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jan 24 15:20:54 CST 2018.
    -->
    delete from AF_USER
    where TELNUM = #{telnum,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.yinqiao.af.model.User">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jan 24 15:20:54 CST 2018.
    -->
    insert into AF_USER (TELNUM, OPENID, PASSWORD, 
      USERNAME, IDCARD, EFFSTART, 
      EFFEND, USERSTATUS, CREATETIME,USERTYPE,EXAM_TYPE
      )
    values (#{telnum,jdbcType=VARCHAR}, #{openid,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{username,jdbcType=VARCHAR}, #{idcard,jdbcType=VARCHAR}, #{effstart,jdbcType=TIMESTAMP}, 
      #{effend,jdbcType=TIMESTAMP}, #{userstatus,jdbcType=VARCHAR}, #{createtime,jdbcType=TIMESTAMP},#{usertype,jdbcType=VARCHAR},#{examType,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.yinqiao.af.model.User">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jan 24 15:20:54 CST 2018.
    -->
    update AF_USER
    set OPENID = #{openid,jdbcType=VARCHAR},
      PASSWORD = #{password,jdbcType=VARCHAR},
      USERNAME = #{username,jdbcType=VARCHAR},
      IDCARD = #{idcard,jdbcType=VARCHAR},
      EFFSTART = #{effstart,jdbcType=TIMESTAMP},
      EFFEND = #{effend,jdbcType=TIMESTAMP},
      USERSTATUS = #{userstatus,jdbcType=VARCHAR},
      CREATETIME = #{createtime,jdbcType=TIMESTAMP},
      USERTYPE = #{usertype,jdbcType=VARCHAR},
      EXAM_TYPE = #{examType,jdbcType=VARCHAR}
    where TELNUM = #{telnum,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jan 24 15:20:54 CST 2018.
    -->
    select TELNUM, OPENID, PASSWORD, USERNAME, IDCARD, EFFSTART, EFFEND, USERSTATUS, 
    CREATETIME,USERTYPE,EXAM_TYPE
    from AF_USER
    where TELNUM = #{telnum,jdbcType=VARCHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jan 24 15:20:54 CST 2018.
    -->
    select TELNUM, OPENID, PASSWORD, USERNAME, IDCARD, EFFSTART, EFFEND, USERSTATUS, 
    CREATETIME,USERTYPE,EXAM_TYPE
    from AF_USER
  </select>
  
  <select id="queryUserIsEffective" resultType="java.lang.String" parameterType="java.lang.String">
  	<![CDATA[
  		select count(*) from AF_USER t where t.effstart <=sysdate and t.effend >= sysdate and t.telnum = #{telnum,jdbcType=VARCHAR}
  	]]>
  </select>
  
   <select id="queryUserCnt" resultType="java.lang.String" parameterType="java.lang.String">
		select count(*) from AF_USER t where t.telnum = #{telnum,jdbcType=VARCHAR}
   </select>
   
   <select id="selectByOpenid"  resultMap="BaseResultMap" parameterType="java.lang.String">
	   	select TELNUM, OPENID, PASSWORD, USERNAME, IDCARD, EFFSTART, EFFEND, USERSTATUS, 
	    CREATETIME,USERTYPE,EXAM_TYPE
	    from AF_USER
	    where OPENID = #{openid,jdbcType=VARCHAR}
   </select>
</mapper>